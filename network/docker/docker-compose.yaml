version: '2.1'

volumes:
  pgdata:
  walletstore:

networks:
  hyperledger:

services:
  # Orderers
  orderer0:
    container_name: orderer0
    image: hyperledger/fabric-orderer:2.2.1
    working_dir: /var/hyperledger/orderer
    environment: 
      - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
      - ORDERER_GENERAL_GENESISMETHOD=file
      - ORDERER_GENERAL_GENESISPROFILE=OrdererGenesis
      - ORDERER_GENERAL_SYSTEMCHANNEL=system-channel
      - ORDERER_GENERAL_GENESISFILE=/var/hyperledger/orderer/data/genesis.block
      - ORDERER_GENERAL_LOCALMSPID=orderer
      - ORDERER_GENERAL_LOCALMSPDIR=/var/hyperledger/orderer/msp
      - ORDERER_GENERAL_TLS_ENABLED=true
      - ORDERER_GENERAL_TLS_PRIVATEKEY=/var/hyperledger/orderer/tls/server.key
      - ORDERER_GENERAL_TLS_CERTIFICATE=/var/hyperledger/orderer/tls/server.crt
      - ORDERER_GENERAL_TLS_ROOTCAS=[/var/hyperledger/orderer/tls/ca.crt]
      - ORDERER_KAFKA_TOPIC_REPLICATIONFACTOR=1
      - ORDERER_KAFKA_VERBOSE=true
      - ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY=/var/hyperledger/orderer/tls/server.key
      - ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE=/var/hyperledger/orderer/tls/server.crt
      - ORDERER_GENERAL_CLUSTER_ROOTCAS=[/var/hyperledger/orderer/tls/ca.crt]
    volumes:
      - ../../crypto-config/ordererOrganizations/orderer/orderers/orderer0/msp:/var/hyperledger/orderer/msp
      - ../../crypto-config/ordererOrganizations/orderer/orderers/orderer0/tls:/var/hyperledger/orderer/tls
      - ../../state/orderer0:/var/hyperledger/production/orderer
      - ../../orderer:/var/hyperledger/orderer/data
    ports:
      - 7050:7050
    networks:
      - hyperledger
  orderer1:
    container_name: orderer1
    image: hyperledger/fabric-orderer:2.2.1
    working_dir: /var/hyperledger/orderer
    environment: 
      - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
      - ORDERER_GENERAL_GENESISMETHOD=file
      - ORDERER_GENERAL_GENESISPROFILE=OrdererGenesis
      - ORDERER_GENERAL_SYSTEMCHANNEL=system-channel
      - ORDERER_GENERAL_GENESISFILE=/var/hyperledger/orderer/data/genesis.block
      - ORDERER_GENERAL_LOCALMSPID=orderer
      - ORDERER_GENERAL_LOCALMSPDIR=/var/hyperledger/orderer/msp
      - ORDERER_GENERAL_TLS_ENABLED=true
      - ORDERER_GENERAL_TLS_PRIVATEKEY=/var/hyperledger/orderer/tls/server.key
      - ORDERER_GENERAL_TLS_CERTIFICATE=/var/hyperledger/orderer/tls/server.crt
      - ORDERER_GENERAL_TLS_ROOTCAS=[/var/hyperledger/orderer/tls/ca.crt]
      - ORDERER_KAFKA_TOPIC_REPLICATIONFACTOR=1
      - ORDERER_KAFKA_VERBOSE=true
      - ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY=/var/hyperledger/orderer/tls/server.key
      - ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE=/var/hyperledger/orderer/tls/server.crt
      - ORDERER_GENERAL_CLUSTER_ROOTCAS=[/var/hyperledger/orderer/tls/ca.crt]
    volumes:
      - ../../crypto-config/ordererOrganizations/orderer/orderers/orderer1/msp:/var/hyperledger/orderer/msp
      - ../../crypto-config/ordererOrganizations/orderer/orderers/orderer1/tls:/var/hyperledger/orderer/tls
      - ../../state/orderer1:/var/hyperledger/production/orderer
      - ../../orderer:/var/hyperledger/orderer/data
    ports:
      - 8050:7050
    networks:
      - hyperledger
  orderer2:
    container_name: orderer2
    image: hyperledger/fabric-orderer:2.2.1
    environment: 
      - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
      - ORDERER_GENERAL_GENESISMETHOD=file
      - ORDERER_GENERAL_GENESISPROFILE=OrdererGenesis
      - ORDERER_GENERAL_SYSTEMCHANNEL=system-channel
      - ORDERER_GENERAL_GENESISFILE=/var/hyperledger/orderer/data/genesis.block
      - ORDERER_GENERAL_LOCALMSPID=orderer
      - ORDERER_GENERAL_LOCALMSPDIR=/var/hyperledger/orderer/msp
      - ORDERER_GENERAL_TLS_ENABLED=true
      - ORDERER_GENERAL_TLS_PRIVATEKEY=/var/hyperledger/orderer/tls/server.key
      - ORDERER_GENERAL_TLS_CERTIFICATE=/var/hyperledger/orderer/tls/server.crt
      - ORDERER_GENERAL_TLS_ROOTCAS=[/var/hyperledger/orderer/tls/ca.crt]
      - ORDERER_KAFKA_TOPIC_REPLICATIONFACTOR=1
      - ORDERER_KAFKA_VERBOSE=true
      - ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY=/var/hyperledger/orderer/tls/server.key
      - ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE=/var/hyperledger/orderer/tls/server.crt
      - ORDERER_GENERAL_CLUSTER_ROOTCAS=[/var/hyperledger/orderer/tls/ca.crt]
    volumes:
      - ../../crypto-config/ordererOrganizations/orderer/orderers/orderer2/msp:/var/hyperledger/orderer/msp
      - ../../crypto-config/ordererOrganizations/orderer/orderers/orderer2/tls:/var/hyperledger/orderer/tls
      - ../../state/orderer2:/var/hyperledger/production/orderer
      - ../../orderer:/var/hyperledger/orderer/data
    ports:
      - 9050:7050
    networks:
      - hyperledger

  # Regulator Peers
  peer0-regulator-couchdb:
    image: couchdb:3.1.1
    container_name: peer0-regulator-couchdb
    environment:
      - COUCHDB_USER=appbootup
      - COUCHDB_PASSWORD=1234
    volumes:
      - ../../state/peer0-regulator-couchdb:/opt/couchdb/data
    ports:
      - 5984:5984
    networks:
      - hyperledger
  peer0-regulator:
    image: hyperledger/fabric-peer:2.2.1
    container_name: peer0-regulator
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: peer node start
    environment:
      #- FABRIC_LOGGING_SPEC=DEBUG
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_DOCKER_ATTACHOUT=true
      - CORE_PEER_ID=peer0-regulator
      - CORE_PEER_LISTENADDRESS=0.0.0.0:7051
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer1-regulator:8051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0-regulator:7051
      - CORE_PEER_GOSSIP_ENDPOINT=peer0-regulator:7051
      - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:7052
      - CORE_PEER_LOCALMSPID=regulator
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=peer0-regulator-couchdb:5984
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=appbootup
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=1234
    volumes:
      - /var/run/:/host/var/run
      - ../../crypto-config/peerOrganizations/regulator/peers/peer0-regulator/msp:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/regulator/peers/peer0-regulator/tls:/etc/hyperledger/fabric/tls
      - ../../state/peer0-regulator:/var/hyperledger/production
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
      - ../../scripts/:/scripts/
    ports:
      - 7051:7051
    depends_on:
      - orderer0
      - orderer1
      - orderer2
    networks:
      - hyperledger
  peer1-regulator-couchdb:
    image: couchdb:3.1.1
    container_name: peer1-regulator-couchdb
    environment:
      - COUCHDB_USER=appbootup
      - COUCHDB_PASSWORD=1234
    volumes:
      - ../../state/peer1-regulator-couchdb:/opt/couchdb/data
    ports:
      - 6984:5984
    networks:
      - hyperledger
  peer1-regulator:
    image: hyperledger/fabric-peer:2.2.1
    container_name: peer1-regulator
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: peer node start
    environment:
      #- FABRIC_LOGGING_SPEC=DEBUG
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_DOCKER_ATTACHOUT=true
      - CORE_PEER_ID=peer1-regulator
      - CORE_PEER_LISTENADDRESS=0.0.0.0:8051
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer0-regulator:7051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1-regulator:8051
      - CORE_PEER_GOSSIP_ENDPOINT=peer1-regulator:8051
      - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:8052
      - CORE_PEER_LOCALMSPID=regulator
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=peer1-regulator-couchdb:5984
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=appbootup
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=1234
    volumes:
      - /var/run/:/host/var/run
      - ../../crypto-config/peerOrganizations/regulator/peers/peer1-regulator/msp:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/regulator/peers/peer1-regulator/tls:/etc/hyperledger/fabric/tls
      - ../../state/peer1-regulator:/var/hyperledger/production
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
      - ../../scripts/:/scripts/
    ports:
      - 8051:7051
    depends_on:
      - orderer0
      - orderer1
      - orderer2
    networks:
      - hyperledger

  # Carrier Peers
  peer0-carrier-couchdb:
    image: couchdb:3.1.1
    container_name: peer0-carrier-couchdb
    environment:
      - COUCHDB_USER=appbootup
      - COUCHDB_PASSWORD=1234
    volumes:
      - ../../state/peer0-carrier-couchdb:/opt/couchdb/data
    ports:
      - 7984:5984
    networks:
      - hyperledger
  peer0-carrier:
    image: hyperledger/fabric-peer:2.2.1
    container_name: peer0-carrier
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: peer node start
    environment:
      #- FABRIC_LOGGING_SPEC=DEBUG
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_DOCKER_ATTACHOUT=true
      - CORE_PEER_ID=peer0-carrier
      - CORE_PEER_LISTENADDRESS=0.0.0.0:9051
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer1-carrier:10051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0-carrier:9051
      - CORE_PEER_GOSSIP_ENDPOINT=peer0-carrier:9051
      - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:7052
      - CORE_PEER_LOCALMSPID=carrier
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=peer0-carrier-couchdb:5984
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=appbootup
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=1234
    volumes:
      - /var/run/:/host/var/run
      - ../../crypto-config/peerOrganizations/carrier/peers/peer0-carrier/msp:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/carrier/peers/peer0-carrier/tls:/etc/hyperledger/fabric/tls
      - ../../state/peer0-carrier:/var/hyperledger/production
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
      - ../../scripts/:/scripts/
    ports:
      - 9051:7051
    depends_on:
      - orderer0
      - orderer1
      - orderer2
    networks:
      - hyperledger
  peer1-carrier-couchdb:
    image: couchdb:3.1.1
    container_name: peer1-carrier-couchdb
    environment:
      - COUCHDB_USER=appbootup
      - COUCHDB_PASSWORD=1234
    volumes:
      - ../../state/peer1-carrier-couchdb:/opt/couchdb/data
    ports:
      - 8984:5984
    networks:
      - hyperledger
  peer1-carrier:
    image: hyperledger/fabric-peer:2.2.1
    container_name: peer1-carrier
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: peer node start
    environment:
      #- FABRIC_LOGGING_SPEC=DEBUG
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_DOCKER_ATTACHOUT=true
      - CORE_PEER_ID=peer1-carrier
      - CORE_PEER_LISTENADDRESS=0.0.0.0:10051
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer0-carrier:9051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1-carrier:10051
      - CORE_PEER_GOSSIP_ENDPOINT=peer1-carrier:10051
      - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:8052
      - CORE_PEER_LOCALMSPID=carrier
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=peer1-carrier-couchdb:5984
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=appbootup
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=1234
    volumes:
      - /var/run/:/host/var/run
      - ../../crypto-config/peerOrganizations/carrier/peers/peer1-carrier/msp:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/carrier/peers/peer1-carrier/tls:/etc/hyperledger/fabric/tls
      - ../../state/peer1-carrier:/var/hyperledger/production
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
      - ../../scripts/:/scripts/
    ports:
      - 10051:7051
    depends_on:
      - orderer0
      - orderer1
      - orderer2
    networks:
      - hyperledger

  # Importer Bank Peers
  peer0-importer-bank-couchdb:
    image: couchdb:3.1.1
    container_name: peer0-importer-bank-couchdb
    environment:
      - COUCHDB_USER=appbootup
      - COUCHDB_PASSWORD=1234
    volumes:
      - ../../state/peer0-importer-bank-couchdb:/opt/couchdb/data
    ports:
      - 9984:5984
    networks:
      - hyperledger
  peer0-importer-bank:
    image: hyperledger/fabric-peer:2.2.1
    container_name: peer0-importer-bank
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: peer node start
    environment:
      #- FABRIC_LOGGING_SPEC=DEBUG
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_DOCKER_ATTACHOUT=true
      - CORE_PEER_ID=peer0-importer-bank
      - CORE_PEER_LISTENADDRESS=0.0.0.0:11051
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer1-importer-bank:12051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0-importer-bank:11051
      - CORE_PEER_GOSSIP_ENDPOINT=peer0-importer-bank:11051
      - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:7052
      - CORE_PEER_LOCALMSPID=importer-bank
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=peer0-importer-bank-couchdb:5984
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=appbootup
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=1234
    volumes:
      - /var/run/:/host/var/run
      - ../../crypto-config/peerOrganizations/importer-bank/peers/peer0-importer-bank/msp:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/importer-bank/peers/peer0-importer-bank/tls:/etc/hyperledger/fabric/tls
      - ../../state/peer0-importer-bank:/var/hyperledger/production
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
      - ../../scripts/:/scripts/
    ports:
      - 11051:7051
    depends_on:
      - orderer0
      - orderer1
      - orderer2
    networks:
      - hyperledger
  peer1-importer-bank-couchdb:
    image: couchdb:3.1.1
    container_name: peer1-importer-bank-couchdb
    environment:
      - COUCHDB_USER=appbootup
      - COUCHDB_PASSWORD=1234
    volumes:
      - ../../state/peer1-importer-bank-couchdb:/opt/couchdb/data
    ports:
      - 10984:5984
    networks:
      - hyperledger
  peer1-importer-bank:
    image: hyperledger/fabric-peer:2.2.1
    container_name: peer1-importer-bank
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: peer node start
    environment:
      #- FABRIC_LOGGING_SPEC=DEBUG
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_DOCKER_ATTACHOUT=true
      - CORE_PEER_ID=peer1-importer-bank
      - CORE_PEER_LISTENADDRESS=0.0.0.0:12051
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer0-importer-bank:11051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1-importer-bank:12051
      - CORE_PEER_GOSSIP_ENDPOINT=peer1-importer-bank:12051
      - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:8052
      - CORE_PEER_LOCALMSPID=importer-bank
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=peer1-importer-bank-couchdb:5984
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=appbootup
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=1234
    volumes:
      - /var/run/:/host/var/run
      - ../../crypto-config/peerOrganizations/importer-bank/peers/peer1-importer-bank/msp:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/importer-bank/peers/peer1-importer-bank/tls:/etc/hyperledger/fabric/tls
      - ../../state/peer1-importer-bank:/var/hyperledger/production
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
      - ../../scripts/:/scripts/
    ports:
      - 12051:7051
    depends_on:
      - orderer0
      - orderer1
      - orderer2
    networks:
      - hyperledger

  # Exporter Bank Peers
  peer0-exporter-bank-couchdb:
    image: couchdb:3.1.1
    container_name: peer0-exporter-bank-couchdb
    environment:
      - COUCHDB_USER=appbootup
      - COUCHDB_PASSWORD=1234
    volumes:
      - ../../state/peer0-exporter-bank-couchdb:/opt/couchdb/data
    ports:
      - 11984:5984
    networks:
      - hyperledger
  peer0-exporter-bank:
    image: hyperledger/fabric-peer:2.2.1
    container_name: peer0-exporter-bank
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: peer node start
    environment:
      #- FABRIC_LOGGING_SPEC=DEBUG
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_DOCKER_ATTACHOUT=true
      - CORE_PEER_ID=peer0-exporter-bank
      - CORE_PEER_LISTENADDRESS=0.0.0.0:13051
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer1-exporter-bank:14051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0-exporter-bank:13051
      - CORE_PEER_GOSSIP_ENDPOINT=peer0-exporter-bank:13051
      - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:7052
      - CORE_PEER_LOCALMSPID=exporter-bank
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=peer0-exporter-bank-couchdb:5984
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=appbootup
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=1234
    volumes:
      - /var/run/:/host/var/run
      - ../../crypto-config/peerOrganizations/exporter-bank/peers/peer0-exporter-bank/msp:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/exporter-bank/peers/peer0-exporter-bank/tls:/etc/hyperledger/fabric/tls
      - ../../state/peer0-exporter-bank:/var/hyperledger/production
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
      - ../../scripts/:/scripts/
    ports:
      - 13051:7051
    depends_on:
      - orderer0
      - orderer1
      - orderer2
    networks:
      - hyperledger
  peer1-exporter-bank-couchdb:
    image: couchdb:3.1.1
    container_name: peer1-exporter-bank-couchdb
    environment:
      - COUCHDB_USER=appbootup
      - COUCHDB_PASSWORD=1234
    volumes:
      - ../../state/peer1-exporter-bank-couchdb:/opt/couchdb/data
    ports:
      - 12984:5984
    networks:
      - hyperledger
  peer1-exporter-bank:
    image: hyperledger/fabric-peer:2.2.1
    container_name: peer1-exporter-bank
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: peer node start
    environment:
      #- FABRIC_LOGGING_SPEC=DEBUG
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_DOCKER_ATTACHOUT=true
      - CORE_PEER_ID=peer1-exporter-bank
      - CORE_PEER_LISTENADDRESS=0.0.0.0:14051
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer0-exporter-bank:13051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1-exporter-bank:14051
      - CORE_PEER_GOSSIP_ENDPOINT=peer1-exporter-bank:14051
      - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:8052
      - CORE_PEER_LOCALMSPID=exporter-bank
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=peer1-exporter-bank-couchdb:5984
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=appbootup
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=1234
    volumes:
      - /var/run/:/host/var/run
      - ../../crypto-config/peerOrganizations/exporter-bank/peers/peer1-exporter-bank/msp:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/exporter-bank/peers/peer1-exporter-bank/tls:/etc/hyperledger/fabric/tls
      - ../../state/peer1-exporter-bank:/var/hyperledger/production
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
      - ../../scripts/:/scripts/
    ports:
      - 14051:7051
    depends_on:
      - orderer0
      - orderer1
      - orderer2
    networks:
      - hyperledger

  # Importer Peers
  peer0-importer-couchdb:
    image: couchdb:3.1.1
    container_name: peer0-importer-couchdb
    environment:
      - COUCHDB_USER=appbootup
      - COUCHDB_PASSWORD=1234
    volumes:
      - ../../state/peer0-importer-couchdb:/opt/couchdb/data
    ports:
      - 13984:5984
    networks:
      - hyperledger
  peer0-importer:
    image: hyperledger/fabric-peer:2.2.1
    container_name: peer0-importer
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: peer node start
    environment:
      #- FABRIC_LOGGING_SPEC=DEBUG
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_DOCKER_ATTACHOUT=true
      - CORE_PEER_ID=peer0-importer
      - CORE_PEER_LISTENADDRESS=0.0.0.0:15051
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer1-importer:16051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0-importer:15051
      - CORE_PEER_GOSSIP_ENDPOINT=peer0-importer:15051
      - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:7052
      - CORE_PEER_LOCALMSPID=importer
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=peer0-importer-couchdb:5984
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=appbootup
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=1234
    volumes:
      - /var/run/:/host/var/run
      - ../../crypto-config/peerOrganizations/importer/peers/peer0-importer/msp:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/importer/peers/peer0-importer/tls:/etc/hyperledger/fabric/tls
      - ../../state/peer0-importer:/var/hyperledger/production
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
      - ../../scripts/:/scripts/
    ports:
      - 15051:7051
    depends_on:
      - orderer0
      - orderer1
      - orderer2
    networks:
      - hyperledger
  peer1-importer-couchdb:
    image: couchdb:3.1.1
    container_name: peer1-importer-couchdb
    environment:
      - COUCHDB_USER=appbootup
      - COUCHDB_PASSWORD=1234
    volumes:
      - ../../state/peer1-importer-couchdb:/opt/couchdb/data
    ports:
      - 14984:5984
    networks:
      - hyperledger
  peer1-importer:
    image: hyperledger/fabric-peer:2.2.1
    container_name: peer1-importer
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: peer node start
    environment:
      #- FABRIC_LOGGING_SPEC=DEBUG
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_DOCKER_ATTACHOUT=true
      - CORE_PEER_ID=peer1-importer
      - CORE_PEER_LISTENADDRESS=0.0.0.0:16051
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer0-importer:15051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1-importer:16051
      - CORE_PEER_GOSSIP_ENDPOINT=peer1-importer:16051
      - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:8052
      - CORE_PEER_LOCALMSPID=importer
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=peer1-importer-couchdb:5984
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=appbootup
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=1234
    volumes:
      - /var/run/:/host/var/run
      - ../../crypto-config/peerOrganizations/importer/peers/peer1-importer/msp:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/importer/peers/peer1-importer/tls:/etc/hyperledger/fabric/tls
      - ../../state/peer1-importer:/var/hyperledger/production
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
      - ../../scripts/:/scripts/
    ports:
      - 16051:7051
    depends_on:
      - orderer0
      - orderer1
      - orderer2
    networks:
      - hyperledger
      
  # Exporter Peers
  peer0-exporter-couchdb:
    image: couchdb:3.1.1
    container_name: peer0-exporter-couchdb
    environment:
      - COUCHDB_USER=appbootup
      - COUCHDB_PASSWORD=1234
    volumes:
      - ../../state/peer0-exporter-couchdb:/opt/couchdb/data
    ports:
      - 15984:5984
    networks:
      - hyperledger
  peer0-exporter:
    image: hyperledger/fabric-peer:2.2.1
    container_name: peer0-exporter
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: peer node start
    environment:
      #- FABRIC_LOGGING_SPEC=DEBUG
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_DOCKER_ATTACHOUT=true
      - CORE_PEER_ID=peer0-exporter
      - CORE_PEER_LISTENADDRESS=0.0.0.0:17051
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer1-exporter:18051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0-exporter:17051
      - CORE_PEER_GOSSIP_ENDPOINT=peer0-exporter:17051
      - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:7052
      - CORE_PEER_LOCALMSPID=exporter
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=peer0-exporter-couchdb:5984
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=appbootup
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=1234
    volumes:
      - /var/run/:/host/var/run
      - ../../crypto-config/peerOrganizations/exporter/peers/peer0-exporter/msp:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/exporter/peers/peer0-exporter/tls:/etc/hyperledger/fabric/tls
      - ../../state/peer0-exporter:/var/hyperledger/production
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
      - ../../scripts/:/scripts/
    ports:
      - 17051:7051
    depends_on:
      - orderer0
      - orderer1
      - orderer2
    networks:
      - hyperledger
  peer1-exporter-couchdb:
    image: couchdb:3.1.1
    container_name: peer1-exporter-couchdb
    environment:
      - COUCHDB_USER=appbootup
      - COUCHDB_PASSWORD=1234
    volumes:
      - ../../state/peer1-exporter-couchdb:/opt/couchdb/data
    ports:
      - 16984:5984
    networks:
      - hyperledger
  peer1-exporter:
    image: hyperledger/fabric-peer:2.2.1
    container_name: peer1-exporter
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: peer node start
    environment:
      #- FABRIC_LOGGING_SPEC=DEBUG
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_DOCKER_ATTACHOUT=true
      - CORE_PEER_ID=peer1-exporter
      - CORE_PEER_LISTENADDRESS=0.0.0.0:18051
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer0-exporter:17051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1-exporter:18051
      - CORE_PEER_GOSSIP_ENDPOINT=peer1-exporter:18051
      - CORE_PEER_CHAINCODELISTENADDRESS=0.0.0.0:8052
      - CORE_PEER_LOCALMSPID=exporter
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=peer1-exporter-couchdb:5984
      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB
      - CORE_LEDGER_STATE_COUCHDBCONFIG_USERNAME=appbootup
      - CORE_LEDGER_STATE_COUCHDBCONFIG_PASSWORD=1234
    volumes:
      - /var/run/:/host/var/run
      - ../../crypto-config/peerOrganizations/exporter/peers/peer1-exporter/msp:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/exporter/peers/peer1-exporter/tls:/etc/hyperledger/fabric/tls
      - ../../state/peer1-exporter:/var/hyperledger/production
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
      - ../../scripts/:/scripts/
    ports:
      - 18051:7051
    depends_on:
      - orderer0
      - orderer1
      - orderer2
    networks:
      - hyperledger

  # CLIs
  cli-peer0-regulator:
    container_name: cli-peer0-regulator
    image: hyperledger/fabric-tools:2.2.1
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true

      - CORE_PEER_ID=cli-peer0-regulator
      - CORE_PEER_ADDRESS=peer0-regulator:7051
      - CORE_PEER_LOCALMSPID=regulator
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/msp/users/Admin@regulator/msp

      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    volumes:
      - ../../orderer/:/opt/gopath/src/github.com/hyperledger/fabric/peer/orderer
      - ../../chaincode/resources:/opt/gopath/src/resources
      - ../../chaincode/resource_types:/opt/gopath/src/resource_types
      - ../../channels/:/opt/gopath/src/github.com/hyperledger/fabric/peer/channels
      - ../../crypto-config/peerOrganizations/regulator:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/regulator/peers/peer0-regulator/tls:/etc/hyperledger/fabric/tls
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
    depends_on:
      - peer0-regulator
    command: sleep 500000
    networks:
      - hyperledger

  cli-peer1-regulator:
    container_name: cli-peer1-regulator
    image: hyperledger/fabric-tools:2.2.1
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true

      - CORE_PEER_ID=cli-peer1-regulator
      - CORE_PEER_ADDRESS=peer1-regulator:8051
      - CORE_PEER_LOCALMSPID=regulator
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/msp/users/Admin@regulator/msp

      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    volumes:
      - ../../orderer/:/opt/gopath/src/github.com/hyperledger/fabric/peer/orderer
      - ../../chaincode/resources:/opt/gopath/src/resources
      - ../../chaincode/resource_types:/opt/gopath/src/resource_types
      - ../../channels/:/opt/gopath/src/github.com/hyperledger/fabric/peer/channels
      - ../../crypto-config/peerOrganizations/regulator:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/regulator/peers/peer1-regulator/tls:/etc/hyperledger/fabric/tls
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
    depends_on:
      - peer0-regulator
    command: sleep 500000
    networks:
      - hyperledger

  cli-peer0-carrier:
    container_name: cli-peer0-carrier
    image: hyperledger/fabric-tools:2.2.1
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true

      - CORE_PEER_ID=cli-peer0-carrier
      - CORE_PEER_ADDRESS=peer0-carrier:9051
      - CORE_PEER_LOCALMSPID=carrier
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/msp/users/Admin@carrier/msp

      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    volumes:
      - ../../orderer/:/opt/gopath/src/github.com/hyperledger/fabric/peer/orderer
      - ../../chaincode/resources:/opt/gopath/src/resources
      - ../../chaincode/resource_types:/opt/gopath/src/resource_types
      - ../../channels/:/opt/gopath/src/github.com/hyperledger/fabric/peer/channels
      - ../../crypto-config/peerOrganizations/carrier:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/carrier/peers/peer0-carrier/tls:/etc/hyperledger/fabric/tls
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
    depends_on:
      - peer0-carrier
    command: sleep 500000
    networks:
      - hyperledger

  cli-peer1-carrier:
    container_name: cli-peer1-carrier
    image: hyperledger/fabric-tools:2.2.1
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true

      - CORE_PEER_ID=cli-peer1-carrier
      - CORE_PEER_ADDRESS=peer1-carrier:10051
      - CORE_PEER_LOCALMSPID=carrier
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/msp/users/Admin@carrier/msp

      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    volumes:
      - ../../orderer/:/opt/gopath/src/github.com/hyperledger/fabric/peer/orderer
      - ../../chaincode/resources:/opt/gopath/src/resources
      - ../../chaincode/resource_types:/opt/gopath/src/resource_types
      - ../../channels/:/opt/gopath/src/github.com/hyperledger/fabric/peer/channels
      - ../../crypto-config/peerOrganizations/carrier:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/carrier/peers/peer1-carrier/tls:/etc/hyperledger/fabric/tls
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
    depends_on:
      - peer1-carrier
    command: sleep 500000
    networks:
      - hyperledger

  cli-peer0-importer-bank:
    container_name: cli-peer0-importer-bank
    image: hyperledger/fabric-tools:2.2.1
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true

      - CORE_PEER_ID=cli-peer0-importer-bank
      - CORE_PEER_ADDRESS=peer0-importer-bank:11051
      - CORE_PEER_LOCALMSPID=importer-bank
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/msp/users/Admin@importer-bank/msp

      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    volumes:
      - ../../orderer/:/opt/gopath/src/github.com/hyperledger/fabric/peer/orderer
      - ../../chaincode/resources:/opt/gopath/src/resources
      - ../../chaincode/resource_types:/opt/gopath/src/resource_types
      - ../../channels/:/opt/gopath/src/github.com/hyperledger/fabric/peer/channels
      - ../../crypto-config/peerOrganizations/importer-bank:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/importer-bank/peers/peer0-importer-bank/tls:/etc/hyperledger/fabric/tls
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
    depends_on:
      - peer0-importer-bank
    command: sleep 500000
    networks:
      - hyperledger

  cli-peer1-importer-bank:
    container_name: cli-peer1-importer-bank
    image: hyperledger/fabric-tools:2.2.1
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true

      - CORE_PEER_ID=cli-peer1-importer-bank
      - CORE_PEER_ADDRESS=peer1-importer-bank:12051
      - CORE_PEER_LOCALMSPID=importer-bank
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/msp/users/Admin@importer-bank/msp

      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    volumes:
      - ../../orderer/:/opt/gopath/src/github.com/hyperledger/fabric/peer/orderer
      - ../../chaincode/resources:/opt/gopath/src/resources
      - ../../chaincode/resource_types:/opt/gopath/src/resource_types
      - ../../channels/:/opt/gopath/src/github.com/hyperledger/fabric/peer/channels
      - ../../crypto-config/peerOrganizations/importer-bank:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/importer-bank/peers/peer1-importer-bank/tls:/etc/hyperledger/fabric/tls
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
    depends_on:
      - peer1-importer-bank
    command: sleep 500000
    networks:
      - hyperledger

  cli-peer0-exporter-bank:
    container_name: cli-peer0-exporter-bank
    image: hyperledger/fabric-tools:2.2.1
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true

      - CORE_PEER_ID=cli-peer0-exporter-bank
      - CORE_PEER_ADDRESS=peer0-exporter-bank:13051
      - CORE_PEER_LOCALMSPID=exporter-bank
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/msp/users/Admin@exporter-bank/msp

      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    volumes:
      - ../../orderer/:/opt/gopath/src/github.com/hyperledger/fabric/peer/orderer
      - ../../chaincode/resources:/opt/gopath/src/resources
      - ../../chaincode/resource_types:/opt/gopath/src/resource_types
      - ../../channels/:/opt/gopath/src/github.com/hyperledger/fabric/peer/channels
      - ../../crypto-config/peerOrganizations/exporter-bank:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/exporter-bank/peers/peer0-exporter-bank/tls:/etc/hyperledger/fabric/tls
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
    depends_on:
      - peer0-exporter-bank
    command: sleep 500000
    networks:
      - hyperledger

  cli-peer1-exporter-bank:
    container_name: cli-peer1-exporter-bank
    image: hyperledger/fabric-tools:2.2.1
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true

      - CORE_PEER_ID=cli-peer1-exporter-bank
      - CORE_PEER_ADDRESS=peer1-exporter-bank:14051
      - CORE_PEER_LOCALMSPID=exporter-bank
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/msp/users/Admin@exporter-bank/msp

      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    volumes:
      - ../../orderer/:/opt/gopath/src/github.com/hyperledger/fabric/peer/orderer
      - ../../chaincode/resources:/opt/gopath/src/resources
      - ../../chaincode/resource_types:/opt/gopath/src/resource_types
      - ../../channels/:/opt/gopath/src/github.com/hyperledger/fabric/peer/channels
      - ../../crypto-config/peerOrganizations/exporter-bank:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/exporter-bank/peers/peer1-exporter-bank/tls:/etc/hyperledger/fabric/tls
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
    depends_on:
      - peer1-exporter-bank
    command: sleep 500000
    networks:
      - hyperledger

  cli-peer0-importer:
    container_name: cli-peer0-importer
    image: hyperledger/fabric-tools:2.2.1
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true

      - CORE_PEER_ID=cli-peer0-importer
      - CORE_PEER_ADDRESS=peer0-importer:15051
      - CORE_PEER_LOCALMSPID=importer
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/msp/users/Admin@importer/msp

      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    volumes:
      - ../../orderer/:/opt/gopath/src/github.com/hyperledger/fabric/peer/orderer
      - ../../chaincode/resources:/opt/gopath/src/resources
      - ../../chaincode/resource_types:/opt/gopath/src/resource_types
      - ../../channels/:/opt/gopath/src/github.com/hyperledger/fabric/peer/channels
      - ../../crypto-config/peerOrganizations/importer:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/importer/peers/peer0-importer/tls:/etc/hyperledger/fabric/tls
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
    depends_on:
      - peer0-importer
    command: sleep 500000
    networks:
      - hyperledger

  cli-peer1-importer:
    container_name: cli-peer1-importer
    image: hyperledger/fabric-tools:2.2.1
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true

      - CORE_PEER_ID=cli-peer1-importer
      - CORE_PEER_ADDRESS=peer1-importer:16051
      - CORE_PEER_LOCALMSPID=importer
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/msp/users/Admin@importer/msp

      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    volumes:
      - ../../orderer/:/opt/gopath/src/github.com/hyperledger/fabric/peer/orderer
      - ../../chaincode/resources:/opt/gopath/src/resources
      - ../../chaincode/resource_types:/opt/gopath/src/resource_types
      - ../../channels/:/opt/gopath/src/github.com/hyperledger/fabric/peer/channels
      - ../../crypto-config/peerOrganizations/importer:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/importer/peers/peer1-importer/tls:/etc/hyperledger/fabric/tls
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
    depends_on:
      - peer1-importer
    command: sleep 500000
    networks:
      - hyperledger

  cli-peer0-exporter:
    container_name: cli-peer0-exporter
    image: hyperledger/fabric-tools:2.2.1
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true

      - CORE_PEER_ID=cli-peer0-exporter
      - CORE_PEER_ADDRESS=peer0-exporter:17051
      - CORE_PEER_LOCALMSPID=exporter
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/msp/users/Admin@exporter/msp

      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    volumes:
      - ../../orderer/:/opt/gopath/src/github.com/hyperledger/fabric/peer/orderer
      - ../../chaincode/resources:/opt/gopath/src/resources
      - ../../chaincode/resource_types:/opt/gopath/src/resource_types
      - ../../channels/:/opt/gopath/src/github.com/hyperledger/fabric/peer/channels
      - ../../crypto-config/peerOrganizations/exporter:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/exporter/peers/peer0-exporter/tls:/etc/hyperledger/fabric/tls
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
    depends_on:
      - peer0-exporter
    command: sleep 500000
    networks:
      - hyperledger

  cli-peer1-exporter:
    container_name: cli-peer1-exporter
    image: hyperledger/fabric-tools:2.2.1
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true

      - CORE_PEER_ID=cli-peer1-exporter
      - CORE_PEER_ADDRESS=peer1-exporter:18051
      - CORE_PEER_LOCALMSPID=exporter
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/msp/users/Admin@exporter/msp

      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    volumes:
      - ../../orderer/:/opt/gopath/src/github.com/hyperledger/fabric/peer/orderer
      - ../../chaincode/resources:/opt/gopath/src/resources
      - ../../chaincode/resource_types:/opt/gopath/src/resource_types
      - ../../channels/:/opt/gopath/src/github.com/hyperledger/fabric/peer/channels
      - ../../crypto-config/peerOrganizations/exporter:/etc/hyperledger/fabric/msp
      - ../../crypto-config/peerOrganizations/exporter/peers/peer1-exporter/tls:/etc/hyperledger/fabric/tls
      - ../../crypto-config/ordererOrganizations/orderer:/etc/hyperledger/orderers
    depends_on:
      - peer1-exporter
    command: sleep 500000
    networks:
      - hyperledger

  # Explorer

  # explorerdb:
  #   image: hyperledger/explorer-db:latest
  #   container_name: explorerdb
  #   hostname: explorerdb
  #   environment:
  #     - DATABASE_DATABASE=fabricexplorer
  #     - DATABASE_USERNAME=hppoc
  #     - DATABASE_PASSWORD=password
  #   healthcheck:
  #     test: "pg_isready -h localhost -p 5432 -q -U postgres"
  #     interval: 30s
  #     timeout: 10s
  #     retries: 5
  #   volumes:
  #     - pgdata:/var/lib/postgresql/data
  #   depends_on:
  #     - peer0-regulator
  #     - peer1-regulator
  #     - peer0-carrier
  #     - peer1-carrier
  #     - peer0-importer-bank
  #     - peer1-importer-bank
  #     - peer0-exporter-bank
  #     - peer1-exporter-bank
  #     - peer0-importer
  #     - peer1-importer
  #     - peer0-exporter
  #     - peer1-exporter
  #   networks:
  #     - hyperledger

  # explorer:
  #   image: hyperledger/explorer:latest
  #   container_name: explorer
  #   hostname: explorer
  #   environment:
  #     - DATABASE_HOST=explorerdb
  #     - DATABASE_DATABASE=fabricexplorer
  #     - DATABASE_USERNAME=hppoc
  #     - DATABASE_PASSWD=password
  #     - LOG_LEVEL_APP=debug
  #     - LOG_LEVEL_DB=debug
  #     - LOG_LEVEL_CONSOLE=info
  #     - LOG_CONSOLE_STDOUT=true
  #     - DISCOVERY_AS_LOCALHOST=false
  #   volumes:
  #     - ./explorer/config.json:/opt/explorer/app/platform/fabric/config.json
  #     - ./explorer/connection-profile:/opt/explorer/app/platform/fabric/connection-profile
  #     - ../../crypto-config:/tmp/crypto
  #     - ./explorer/walletstore:/opt/wallet
  #   ports:
  #     - 8080:8080
  #   depends_on:
  #     explorerdb:
  #       condition: service_healthy
  #   networks:
  #     - hyperledger

  # APIs

  # regulator-api:
  #   container_name: regulator-api
  #   build:
  #     context: ../../node-api
  #     dockerfile: Dockerfile
  #   environment:
  #     - ENV=dev
  #     - MSPID=regulator
  #   ports:
  #     - 4010:4000
  #   volumes:
  #     - ../../node-api:/api
  #     - ../../crypto-config/:/crypto-config
  #   depends_on:
  #     explorerdb:
  #       condition: service_healthy
  #   networks:
  #     - hyperledger
  # carrier-api:
  #   container_name: carrier-api
  #   build:
  #     context: ../../node-api
  #     dockerfile: Dockerfile
  #   environment:
  #     - ENV=dev
  #     - MSPID=carrier
  #   ports:
  #     - 4011:4000
  #   volumes:
  #     - ../../node-api:/api
  #     - ../../crypto-config/:/crypto-config
  #   depends_on:
  #     explorerdb:
  #       condition: service_healthy
  #   networks:
  #     - hyperledger
  # importer-bank-api:
  #   container_name: importer-bank-api
  #   build:
  #     context: ../../node-api
  #     dockerfile: Dockerfile
  #   environment:
  #     - ENV=dev
  #     - MSPID=importer-bank
  #   ports:
  #     - 4012:4000
  #   volumes:
  #     - ../../node-api:/api
  #     - ../../crypto-config/:/crypto-config
  #   depends_on:
  #     explorerdb:
  #       condition: service_healthy
  #   networks:
  #     - hyperledger
  # exporter-bank-api:
  #   container_name: exporter-bank-api
  #   build:
  #     context: ../../node-api
  #     dockerfile: Dockerfile
  #   environment:
  #     - ENV=dev
  #     - MSPID=exporter-bank
  #   ports:
  #     - 4013:4000
  #   volumes:
  #     - ../../node-api:/api
  #     - ../../crypto-config/:/crypto-config
  #   depends_on:
  #     explorerdb:
  #       condition: service_healthy
  #   networks:
  #     - hyperledger
  # importer-api:
  #   container_name: importer-api
  #   build:
  #     context: ../../node-api
  #     dockerfile: Dockerfile
  #   environment:
  #     - ENV=dev
  #     - MSPID=importer
  #   ports:
  #     - 4014:4000
  #   volumes:
  #     - ../../node-api:/api
  #     - ../../crypto-config/:/crypto-config
  #   depends_on:
  #     explorerdb:
  #       condition: service_healthy
  #   networks:
  #     - hyperledger
  # exporter-api:
  #   container_name: exporter-api
  #   build:
  #     context: ../../node-api
  #     dockerfile: Dockerfile
  #   environment:
  #     - ENV=dev
  #     - MSPID=exporter
  #   ports:
  #     - 4015:4000
  #   volumes:
  #     - ../../node-api:/api
  #     - ../../crypto-config/:/crypto-config
  #   depends_on:
  #     explorerdb:
  #       condition: service_healthy
  #   networks:
  #     - hyperledger      